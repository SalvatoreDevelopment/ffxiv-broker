{% extends "base.html" %}
{% block title %}Dashboard FFXIV Market Advisor{% endblock %}

{% block content %}
<section class="mb-6">
  <h2 class="text-2xl font-bold mb-2">Benvenuto</h2>
  <p class="text-slate-600">Panoramica rapida del mercato e del tuo portafoglio.</p>
</section>

<section class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-8">
  <!-- Market Overview -->
  <div class="card">
    <div class="card-header">Market Overview</div>
    <div class="card-body">
      <canvas id="market-overview-chart" height="120"></canvas>
    </div>
  </div>

  <!-- Portfolio -->
  <div class="card">
    <div class="card-header">Portfolio</div>
    <div class="card-body">
      <ul class="space-y-2 text-sm">
        <li class="flex justify-between"><span>Valore Totale</span><span class="font-semibold" id="pf-total">—</span></li>
        <li class="flex justify-between"><span>Profitto (24h)</span><span class="font-semibold" id="pf-pnl-24h">—</span></li>
        <li class="flex justify-between"><span>ROI</span><span class="font-semibold" id="pf-roi">—</span></li>
      </ul>
    </div>
  </div>

  <!-- ROI Calculator -->
  <div class="card">
    <div class="card-header">ROI Calculator</div>
    <div class="card-body space-y-3">
      <div class="flex gap-2">
        <input id="roi-cost" type="number" class="input" placeholder="Costo (gil)" />
        <input id="roi-price" type="number" class="input" placeholder="Prezzo vendita (gil)" />
      </div>
      <button class="btn btn-primary" id="roi-calc">Calcola</button>
      <div class="text-sm text-slate-600">ROI: <span id="roi-result" class="font-semibold">—</span></div>
    </div>
  </div>
</section>

<section>
  <h3 class="text-xl font-semibold mb-3">Azioni Rapide</h3>
  <div class="flex flex-wrap gap-2">
    <a class="btn" href="/dashboard/market">Vai a Mercato</a>
    <a class="btn" href="/dashboard/portfolio">Vai a Portfolio</a>
    <button class="btn" data-notify="Funzione in arrivo">Sincronizza Dati</button>
  </div>
</section>
{% endblock %}

{% block extra_scripts %}
<script>
  document.addEventListener('DOMContentLoaded', () => {
    window.Dashboard?.init?.();
    window.Dashboard?.mountMarketOverview?.('market-overview-chart');
  });
</script>
{% endblock %}

